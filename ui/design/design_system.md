# XJJ Housekeeper · 设计系统（样式基准与组件规范）

本文档用于对齐前端实现，覆盖颜色、间距、圆角、阴影、字号密度与主要组件的状态规范。适配桌面 1440×900 与移动 375×667 两端视图。

## 1. 样式基准

- 颜色（语义）：
  - 背景 `--bg`: `#F7F9FC`
  - 面板 `--panel`: `#FFFFFF`
  - 文本主色 `--text`: `#1F2937`
  - 文本次级 `--muted`: `#6B7280`
  - 边框 `--border`: `#E5E7EB`
  - 品牌主色 `--accent`: `#2563EB`
  - 主色柔化背景 `--accent-soft`: `#E6F0FF`

- 间距（4pt 基础刻度）：`4, 8, 12, 16, 20, 24, 32, 40`
  - 页边距：桌面 `24`，移动 `16`
  - 组件内边距：列表/表格 `8–12`，卡片 `12–16`

- 圆角：卡片/输入/按钮 `8–12`；设备示意框 `16–20`

- 阴影（提升层级）：
  - 卡片：`0 8px 24px rgba(31,41,55,.08)`（移动），`0 10px 30px rgba(31,41,55,.06)`（桌面）
  - 设备框：`0 16px 40px rgba(31,41,55,.12)`（移动），`0 20px 50px rgba(31,41,55,.1)`（桌面）

- 字体与字号：
  - 字体：系统字体栈（`-apple-system`, `BlinkMacSystemFont`, `Segoe UI`, `Roboto` 等）
  - 桌面：标题 `22`, 正文 `14–16`, 次级 `12`
  - 移动：标题 `18`, 正文 `14–15`, 次级 `11–12`

## 2. 组件规范

- 顶部导航（Topbar）
  - 结构：左 `brand`（产品名），右 `pill`（入口标签）
  - 高度：桌面 `44–52`，移动 `40–44`
  - 分隔：底部 `1px` 边框 `--border`

- 按钮（Button）
  - 默认按钮：边框 `--border`，背景 `#fff`，文本 `--text`
  - 主按钮：边框 `--accent`，背景 `--accent-soft`，文本 `--text`
  - 圆角 `8`，水平内边距 `12`，高度桌面 `36–40`，移动 `34–36`
  - 状态：hover（轻微加深边框/背景），focus（`outline: 2px solid #93C5FD`），disabled（降低不透明度至 `50%`）

- 输入框（Input）
  - 边框 `--border`，背景 `#fff`，圆角 `8`
  - 高度：桌面 `36–40`，移动 `36`
  - 占位符颜色：`--muted`
  - 状态：focus（`outline: 2px solid #93C5FD`），错误（`border: #FCA5A5`）

- 表格（Table）
  - 表头背景 `#F3F4F6`，行分隔 `1px --border`
  - 斑马线：奇数行 `#FAFAFA`
  - 中文列名：`视频`、`大小`、`路径`
  - 数据列不换行：`视频`、`大小`；路径列允许换行并可使用 `word-break: break-all`
  - 行悬停：背景轻微加亮（与卡片阴影一致的层级提升）
  - 列宽与断行：`视频/大小`使用 `white-space: nowrap`；`路径`使用 `word-break: break-all` 保证长路径在小屏可读

- 模态（Modal）
  - 遮罩色：`rgba(0,0,0,.35)`；内容背景 `--panel`
  - 圆角 `12`，外边距最小 `24`（避免贴边）
  - 可访问性：`role="dialog" aria-modal="true" aria-label="..." tabindex="-1"`
  - 状态：处理中（纯指示，不可关闭，锁定 `body` 滚动），完成（支持按键 `Esc` 关闭并解除滚动锁定）

- 入口标签（Pill）
  - 圆角 `999px`，边框 `--border`，背景 `#fff`
  - 文案：查询页显示 `维护视频数据`，维护页显示 `返回查询`

## 2.1 页面规范（按当前高保真）

- 查询页（桌面/移动）
  - 顶部：左侧 `XJJ` 品牌，右侧入口标签 `维护视频数据`。
  - 搜索：单输入框，精确匹配 `video_code`；占位示例：`按视频编号精确查询（示例：ABC-123）`；禁空/禁模糊。
  - 触发：回车触发查询；输入不符合模式时禁用查询按钮并显示提示；初始进入自动聚焦搜索框。
  - 空态：无关键词或不合法时显示友好空态（示例：`请输入关键词进行查询`），并隐藏结果表。
  - 结果表：列名为 `视频`、`大小`、`路径`；`视频/大小`不换行，`路径`允许换行（`word-break: break-all`）；斑马线与行悬停启用。

- 维护页（桌面/移动）
  - 顶部：右侧入口标签 `返回查询`。
  - 表单：四行结构（与原型对齐）：
    1) `扫描目录路径` 输入 + `选择目录` 按钮；
    2) `标签（可选）` 输入；
    3) `逻辑路径（可选）` 输入（移动端可隐藏）；
    4) 主按钮 `开始维护`。
  - 间距（桌面）：表单行样式 `.form-row { display:flex; gap:8px; align-items:center; margin:10px 0; }`；输入框高度与按钮一致（36–40）。
  - 间距（移动）：使用单列布局，按钮置于输入下方，整体密度适配 375×667。
  - 处理中遮罩：全屏遮罩，文案 `处理中` 与说明；不可关闭；显示期间锁定滚动。
  - 完成弹框：标题 `维护完成`、说明文案；仅一个主按钮 `返回查询`；支持 `Esc` 关闭并返回查询页。

## 2.2 可访问性与焦点管理

- 模态：`role="dialog" aria-modal="true" aria-label="维护完成/处理中" tabindex="-1"`，打开后将焦点移动到弹框；关闭后恢复到触发入口或查询输入。
- 键盘：完成态支持 `Esc` 关闭；处理中不响应关闭。
- 聚焦：进入查询页自动聚焦搜索输入；所有交互控件显示一致的 `focus outline`。

## 3. 交互与状态

- 查询流程
  - 仅支持精确匹配查询（示例：`ABC-123`）；不支持空查询与模糊查询
  - 输入不符合模式时禁用查询按钮并显示提示文案
  - 初始进入查询页自动聚焦搜索框
  - 回车键触发查询；空态容器显示友好提示并隐藏表格

- 维护流程
  - 点击“开始维护”显示全屏遮罩“处理中”；完成后弹框“维护完成”
  - 显示期间锁定页面滚动；完成弹框可 `Esc` 关闭并返回查询；关闭后解除滚动锁定

- 可访问性
  - 交互控件均具备键盘可聚焦与可视化 `focus outline`

## 4. 响应式与布局

- 桌面视图：设备框 `1440×900`，主容器最大宽度 `1000`，左右留白均衡
- 移动视图：设备框 `375×667`，使用单列布局；按钮置于输入下方
  - 维护页可隐藏“逻辑路径”输入以简化操作；弹框宽度限制在设备内边距之内（居中显示）

## 5. 资源与导出

- 高保真页面：
  - 查询页：`ui/design/hifi-desktop.html`（桌面），`ui/design/hifi-mobile.html`（移动）
  - 维护页：`ui/design/hifi-desktop-maintain.html`（桌面），`ui/design/hifi-mobile-maintain.html`（移动）
  - 流程状态：`ui/design/hifi-desktop-maintain-processing.html`（桌面处理中）、`ui/design/hifi-desktop-maintain-complete.html`（桌面完成）、`ui/design/hifi-mobile-maintain-processing.html`（移动处理中）、`ui/design/hifi-mobile-maintain-complete.html`（移动完成）
- 截图建议：使用浏览器直接打开页面，将设备框区域截图导出 PNG，即可用于评审或交付